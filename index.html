<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Agente prueba CHATWOOT</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); 
      min-height: 100vh; 
    }
    .chatwoot-iframe, .chatwoot-launcher { 
      z-index: 99999; 
    }
  </style>
</head>
<body>
  <!-- Chatwoot widget -->
  <script>
    (function(d,t) {
      var BASE_URL = "http://31.97.243.241:3000";
      var WEBSITE_TOKEN = "hsngErdhDU26QUUR2KQED9zE";
      var IDENTITY_TOKEN = "FmxD7X6fBb94UC5fCsKLbFdb";
      
      var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
      g.src = BASE_URL + "/packs/js/sdk.js";
      g.async = true;
      s.parentNode.insertBefore(g, s);
      
      g.onerror = function() {
        console.error('‚ùå ERROR: No se pudo cargar el SDK de Chatwoot');
        console.error('URL intentada:', BASE_URL + "/packs/js/sdk.js");
        console.error('Verifica que el servidor Chatwoot est√© accesible en:', BASE_URL);
      };
      
      g.onload = function() {
        console.log('‚úÖ SDK cargado, verificando chatwootSDK...');
        
        if (!window.chatwootSDK) {
          console.error('‚ùå ERROR: window.chatwootSDK no est√° disponible');
          console.error('El SDK no se inicializ√≥ correctamente');
          return;
        }
        
        console.log('‚úÖ chatwootSDK disponible, inicializando widget...');
        
        try {
          window.chatwootSDK.run({
            websiteToken: WEBSITE_TOKEN,
            baseUrl: BASE_URL
          });
          
          console.log('‚úÖ Widget inicializado');
          console.log('üìç Deber√≠as ver el bot√≥n flotante en la esquina inferior derecha');
          
          // Identificar usuario si es necesario
          setTimeout(function() {
            try {
              if (window.chatwootSDK.setUserToken) {
                window.chatwootSDK.setUserToken(IDENTITY_TOKEN);
                console.log('‚úÖ Usuario identificado con setUserToken');
              } else if (window.chatwootSDK.setUser) {
                window.chatwootSDK.setUser('demo.user@example.com', {
                  name: 'Usuario Demo',
                  email: 'demo.user@example.com'
                });
                console.log('‚úÖ Usuario identificado con setUser');
              }
            } catch (err) {
              console.warn('‚ö†Ô∏è No se pudo identificar usuario:', err);
            }
          }, 1000);
          
        } catch (err) {
          console.error('‚ùå ERROR al inicializar widget:', err);
        }
      };
    })(document, "script");
  </script>
  <!-- fin -->
</body>
</html>

